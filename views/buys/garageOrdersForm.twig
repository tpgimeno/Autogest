{% extends "dashboard.twig" %}
{% macro text_works(text) %}
    {% if workslist %}
       
    {% else %}
        {% set workslist = { 1 : _self.input("work")} %}
    {% endif %}

{% endmacro %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-10">
            <h2> Orden de Trabajo </h2>
        </div>   
        <div class="col-md-2 d-flex justify-content-end align-items-end">
            <a class="link pr-4" href="/intranet/buys/orders/list">Lista</a> 
            <a class="link " href="/intranet/admin">Volver</a> 
        </div>        
    </div>
    <div class="row">
        <div class="col">
            <div class="alert alert-dark" role="alert">
                {{ responseMessage }}
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <form action="/intranet/buys/orders/save" method="post" name="form">
                <div class="form-row">                    
                    <div class="form-group col-md-3">
                        <label for="inputName">Nº Orden</label>                        
                        <input type="text" name="order_number" class="form-control" id="inputNumber" placeholder="Número Orden" value="{{ order.order_number }}">
                    </div>
                    <div class="form-group col-md-3 d-none">
                        <label for="inputName">Nº Orden</label>                        
                        <input type="text" name="date_out" class="form-control" id="inputNumber" placeholder="Número Orden" value="{{ order.order_number }}">
                    </div>
                    <div class="form-group col-md-3 ml-auto">
                        <label for="inputDate_in">Fecha Entrada</label>
                        <input type="text" name="date_in" class="form-control" id="inputDate_in" placeholder="Fecha Entrada" value="{{ order.date_in }}">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col">
                        <h4> VEHICULO <a href="#" class="link">Buscar</a> </h4>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-3">                                            
                        <label for="inputPlate">Matricula</label>
                        <input type="text" name="plate" class="form-control" id="inputPlate" placeholder="Matricula" value="{{ vehicle.plate }}">
                    </div>
                    <div class="form-group col-3">
                        <label for="inputVin">Bastidor</label>
                        <input type="text" name="vin" class="form-control" id="inputVin" placeholder="Bastidor" value="{{ vehicle.vin }}">
                    </div>
                     <div class="form-group col-3">
                        <label for="inputBrand">Marca</label>
                        <input type="text" name="brand" class="form-control" id="inputBrand" placeholder="Marca" value="{{ vehicle.brand }}">
                    </div>
                    <div class="form-group col-3">
                        <label for="inputModel">Modelo</label>
                        <input type="text" name="model" class="form-control" id="inputModel" placeholder="Modelo" value="{{ vehicle.model }}">
                    </div>  
                </div>                                                    
                <div class="form-row">                         
                    <div class="form-group col-md-10">
                        <label for="inputDescription">Descripción</label>
                        <input type="text" name="description" class="form-control" id="inputDescription" placeholder="Descripción" value="{{ vehicle.description }}">
                    </div>
                    <div class="form-group col-md-2">
                        <label for="inputKm">Kilometros Entrada</label>
                        <input type="text" name="km_in" class="form-control" id="inputKm" placeholder="Kilómetros" value="{{ vehicle.km }}">
                    </div>                                             
                </div>
                <div class="form-row">
                    <div class="form-group col">
                        <h4> CLIENTE <a href="#" class="link">Buscar</a> </h4>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-9">                                            
                        <label for="inputName">Nombre</label>
                        <input type="text" name="customer_name" class="form-control" id="inputPlate" placeholder="Nombre" value="{{ customer.name }}">
                    </div>
                    <div class="form-group col-3 ml-auto">
                        <label for="inputPhone">Teléfono</label>
                        <input type="text" name="customer_phone" class="form-control" id="inputPhone" placeholder="Teléfono" value="{{ customer.phone }}">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-9">
                        <label for="inputAddress">Dirección</label>
                        <input type="text" name="customer_address" class="form-control" id="inputAddress" placeholder="Dirección" value="{{ customer.address }}">
                    </div>                    
                    <div class="form-group col-3">
                        <label for="inputCity">Población</label>
                        <input type="text" name="customer_city" class="form-control" id="inputCity" placeholder="Población" value="{{ customer.city }}">
                    </div>                     
                </div>                                
                <div class="form-row">
                    <div class="form-group col-9">
                        <label for="inputWork">Tarea</label>
                        <input type="text" name="work" class="form-control" id="inputWork" placeholder="Trabajo">                              
                    </div>
                    <div class="form-group col-3 d-flex justify-content-end align-items-end">
                        <input type="submit" class="form-control btn btn-primary" value="Añadir">
                    </div>                    
                </div>                                
                <div class="form-row">
                    <div class="form-group col">
                        <table class="table">
                            <tr>
                                <th> Descripción </th>
                            </tr>
                            <tr>
                                <td>
                                    <label for="inputWork">Trabajos a Realizar</label>                                    
                                    
                                    <div class="input-group mb-3">
                                        <textarea class="form-control" form="work" cols="50" rows="10" name="works">
                                        {% for work in workslist %}
                                        {{ work }}
                                        <div class="input-group-append">
                                            <button class="btn btn-outline-secondary" type="button" id="edit-button">Editar</button>
                                            <button class="btn btn-outline-secondary" type="button" id="del-button">Eliminar</button>
                                        </div>
                                        {% endfor %}
                                        </textarea>
                                        
                                    </div>                                                                                                   
                                                                       
                                </td>
                            </tr>                            
                        </table>
                    </div>
                </div>
                <div class="form-row">
                    <div class="col text-right">
                    <button type="submit" class="btn btn-primary">Guardar</button>
                    <button type="reset" class="btn btn-primary">Cancelar</button>
                </div>                            
            </form>            
        </div>
    </div>
</div>    
{% endblock %}
{% extends "dashboard.twig" %}
{% block content %}
<div class="container">
    {% block javascripts %}
            <script>
                {{ include('js/vehicles.js')}}
            </script>
    {% endblock %}
    <div class="row">
        <div class="col-md-10">
            <h2> Vehiculo </h2>
        </div>   
        <div class="col-md-2 d-flex justify-content-end align-items-end">
            <a class="link pr-4" href="/intranet/vehicles/list">Lista</a> 
            <a class="link " href="/intranet/admin">Volver</a> 
        </div>        
    </div>
    <div class="row">
        <div class="col">
            <div class="alert alert-dark" id="alert" role="alert">
                {{ responseMessage }}
            </div>
        </div>
    </div>    
    <div class="row">
        <div class="col">
            <form id="VehicleForm" action="/intranet/vehicles/save" method="post">
                <div class="form-row">
                    <div class="col">
                        <ul class="nav nav-tabs" id="myTab" role="tablist">
                            <li class="nav-item" role="presentation">
                              <a class="nav-link active" id="data-tab" data-toggle="tab" href="#data" role="tab" aria-controls="data" aria-selected="true">Datos</a>
                            </li>
                            <li class="nav-item" role="presentation">
                              <a class="nav-link" id="buy-tab" data-toggle="tab" href="#buy" role="tab" aria-controls="buy" aria-selected="false">Compra</a>
                            </li>
                            <li class="nav-item" role="presentation">
                              <a class="nav-link" id="sale-tab" data-toggle="tab" href="#sale" role="tab" aria-controls="sale" aria-selected="false">Venta</a>
                            </li>
                            <li class="nav-item" role="presentation">
                              <a class="nav-link" id="accesories-tab" data-toggle="tab" href="#accesories" role="tab" aria-controls="accesories" aria-selected="false">Accesorios</a>
                            </li>
                            <li class="nav-item" role="presentation">
                              <a class="nav-link" id="equipment-tab" data-toggle="tab" href="#equipment" role="tab" aria-controls="equipment" aria-selected="false">Equipamiento</a>
                            </li>
                            <li class="nav-item" role="presentation">
                              <a class="nav-link" id="technic-tab" data-toggle="tab" href="#tecnicos" role="tab" aria-controls="technics" aria-selected="false">Datos Técnicos</a>
                            </li>
                        </ul>                   
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade show active" id="data" role="tabpanel" aria-labelledby="data-tab">
                                <div class="form-row mt-3">
                                    <div class="form-group col-md-3">
                                        <label for="inputId">Id</label>                        
                                        <input type="text" name="id" class="form-control" id="inputId" placeholder="" value="{{ vehicle.id }}">
                                    </div>
                                    <div class="form-group col-md-3 offset-md-6">
                                            <label for="inputRegistryDate">Fecha Matriculación</label>                        
                                            <input type="date" name="registry_date" class="form-control" id="inputRegistryDate" placeholder="" value="{{ vehicle.registryDate }}">
                                    </div>
                                </div>
                                <div class="form-row mt-3">
                                    <div class="form-group col-md-3">
                                        <label for="inputPlate">Matricula</label>                        
                                        <input type="text" name="plate" class="form-control" id="inputPlate" placeholder="" value="{{ vehicle.plate }}">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="inputVin">Bastidor</label>
                                        <input type="text" name="vin" class="form-control" id="inputVin" placeholder="" value="{{ vehicle.vin }}">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="selectBrand">Marca</label>
                                        <select name="brand" class="form-control" id="selectBrand">
                                            {% for brand in brands %}
                                                <option>{{ brand.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="inputModel">Modelo</label>
                                        <select name="model" class="form-control" id="selectModel">
                                            {% for model in models %}
                                                <option>{{ model.name }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">                    
                                    <div class="form-group col-md-9">
                                        <label for="inputDescription">Descripción</label>
                                        <input type="text" name="description" class="form-control" id="inputDescription" placeholder="" value="{{ vehicle.description }}">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="inputType">Tipo Vehículo</label>
                                        <select name="type" class="form-control" id="selectType">
                                            {% for type in types %}
                                                <option>{{ type.name }}</option>
                                            {% endfor %}                            
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">                                    
                                    <div class="form-group col-md-3">
                                        <label for="inputStore">Almacen</label>
                                        <select name="store" class="form-control" id="selectStore" value="{{ store_selected }}">
                                            {% for store in stores %}
                                                <option>{{ store.name }}</option>
                                            {% endfor %}                            
                                        </select>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="inputLocation">Ubicacion</label>
                                        <select name="location" class="form-control" id="selectLocation" value="{{ location_selected }}">
                                            {% for location in locations %}
                                                <option>{{ location.name }}</option>
                                            {% endfor %}                            
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">                                    
                                    <div class="form-group col-md-2">
                                        <label for="inputKm">Kilómetros</label>
                                        <input type="text" name="km" class="form-control" id="inputKm" placeholder="50000" value="{{ vehicle.km }}">
                                    </div>                    
                                    <div class="form-group col-md-2">
                                        <label for="inputPower">Potencia</label>
                                        <input type="text" name="power" class="form-control text-center" id="inputPower" placeholder="130cv" value="{{ vehicle.power }}">
                                    </div>                          
                                    <div class="form-group col-md-2">
                                        <label for="inputPlaces">Plazas</label>
                                        <input type="text" name="places" class="form-control text-center" id="inputPlaces" placeholder="3" value="{{ vehicle.places }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="inputDoors">Puertas</label>
                                        <input type="text" name="doors" class="form-control text-center" id="inputDoors" placeholder="4" value="{{ vehicle.doors }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="inputColor">Color</label>
                                        <input type="text" name="color" class="form-control" id="inputColor" placeholder="Blanco" value="{{ vehicle.color }}">
                                    </div>                    
                                </div>
                            </div>                                
                            <div class="tab-pane fade" id="buy" role="tabpanel" aria-labelledby="buy-tab">
                                <div class="form-row mt-3">
                                    <div class="form-group col-md-6">
                                        <label for="providor">Proveedor</label>                        
                                        <input type="text" name="providor" class="form-control" id="inputProvidor" placeholder="" value="{{ vehicle.providor }}">
                                    </div>
                                    <div class="form-group offset-2 col-md-2">
                                        <label for="inputArrival">Fecha Llegada</label>
                                        <input type="date" name="arrival" class="form-control" id="inputArrival" placeholder="" value="{{ vehicle.arrival }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="inputDateBuy">Fecha Compra</label>
                                        <input type="date" name="dateBuy" class="form-control" id="inputDateBuy" placeholder="" value="{{ vehicle.datebuy }}">
                                    </div>                                    
                                </div>
                                <div class="form-row mt-3 d-flex align-items-baseline align-content-center">
                                    <div class="form-group col-md-5">
                                        <label for="transference">Quién Realiza el Cambio de Nombre</label>                        
                                        <input type="text" name="transference" class="form-control" id="inputTransference" placeholder="" value="{{ vehicle.transference }}">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="BuyService">Servicio anterior</label>                        
                                        <input type="text" name="BuyService" class="form-control" id="inputBuyService" placeholder="" value="{{ vehicle.buyservice }}">
                                    </div>
                                    <div class="form-group col-md-1 text-center">
                                        <label for="inputSecondKey">2ª Llave</label>
                                        <input type="checkbox" name="secondKey" class="form-control" id="inputSecondKey" placeholder="" value="{{ vehicle.secondkey }}">
                                    </div> 
                                    <div class="form-group col-md-1 text-center">
                                        <label for="inputRebu">R.E.B.U.</label>
                                        <input type="checkbox" name="rebu" class="form-control" id="inputRebu" placeholder="" value="{{ vehicle.rebu }}">
                                    </div> 
                                    <div class="form-group col-md-1 text-center">
                                        <label for="inputCard">Ficha Tecnica</label>
                                        <input type="checkbox" name="dateCard" class="form-control" id="inputCard" placeholder="" value="{{ vehicle.card }}">
                                    </div>
                                    <div class="form-group col-md-1 text-center">
                                        <label for="inputLicense">Permiso de Circulación</label>
                                        <input type="checkbox" name="dateLicense" class="form-control" id="inputLicense" placeholder="" value="{{ vehicle.license }}">
                                    </div>
                                </div>                               
                                <div class="form-row mt-3">
                                    <div class="form-group col-md-2 offset-md-6">
                                        <label for="inputCost">Precio Compra</label>
                                        <input type="text" name="cost" class="form-control" id="inputCost" placeholder="" value="{{ vehicle.cost }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="inputCost">Iva Compra</label>
                                        <input type="text" name="tvaBuy" class="form-control" id="inputTvaCost" placeholder="" value="{{ vehicle.tva }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="inputCost">Total Compra</label>
                                        <input type="text" name="totalBuy" class="form-control" id="inputTotalCost" placeholder="" value="{{ vehicle.total }}">
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="sale" role="tabpanel" aria-labelledby="sale-tab">
                                <div class="form-row mt-3">
                                    <div class="form-group col-md-6">
                                        <label for="seller">Vendedor</label>                        
                                        <input type="text" name="seller" class="form-control" id="inputSeller" placeholder="" value="{{ vehicle.seller }}">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="customer">Cliente</label>                        
                                        <input type="text" name="customer" class="form-control" id="inputCustomer" placeholder="" value="{{ vehicle.customer }}">
                                    </div>
                                    <div class="form-group offset-8 col-md-2">
                                        <label for="inputAppoint">Reserva</label>
                                        <input type="date" name="appoint" class="form-control" id="inputAppoint" placeholder="" value="{{ vehicle.appoint }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="inputDateSell">Fecha Venta</label>
                                        <input type="date" name="dateSell" class="form-control" id="inputDateSell" placeholder="" value="{{ vehicle.datesell }}">
                                    </div>                                    
                                </div>
                                    <div class="form-row"
                                <div class="form-row mt-3">
                                    <div class="form-group col-md-2 offset-md-6">
                                        <label for="inputPvp">Precio Venta</label>
                                        <input type="text" name="pvp" class="form-control" id="inputPvp" placeholder="" value="{{ vehicle.pvp }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="inputPvp">Iva Venta</label>
                                        <input type="text" name="tvaSell" class="form-control" id="inputTvaSell" placeholder="" value="{{ vehicle.pvp }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="inputPvp">Total Venta</label>
                                        <input type="text" name="totalSell" class="form-control" id="inputTotalSell" placeholder="" value="{{ vehicle.pvp }}">
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="accesories" role="tabpanel" aria-labelledby="accesories-tab">
                                <div class="form-row mt-3 ml-3 mb-3">    
                                    <div class="col">
                                        <table class="table">
                                            <tr>
                                                <th>Referencia</th>
                                                <th>Fabricante</th>
                                                <th>Nombre</th>                        
                                                <th>Edit</th>
                                                <th>Delete</th>
                                            </tr>
                                            {% for component in components %}
                                                <tr>
                                                    <td>{{ component.ref }}</td>
                                                    <td>{{ component.mader }}</td>
                                                    <td>{{ component.name }}</td>                            
                                                    <td><a href="/buys/components/form?id={{component.id}}">Edit</td>
                                                    <td><a href="/buys/components/delete?id={{component.id}}">Delete</td>
                                                </tr>
                                            {% endfor %}                
                                        </table>                                        
                                    </div>                                        
                                </div>
                                <div class="form-row d-flex justify-content-end">
                                    <div class="col-md-2 ">
                                        <div class="form-group">
                                            <a href="/intranet/" class="btn btn-primary">Añadir</a>  
                                        </div>
                                    </div>
                                </div>                                                       
                            </div>
                            <div class="tab-pane fade" id="equipment" role="tabpanel" aria-labelledby="equipment-tab">
                                <div class="form-row mt-3 ml-3 mb-3">
                                    {% for accesory in accesories %}
                                    <div class="form-check col-md-3 pl-3">                                    
                                        <input class="form-check-input" name="{{ accesory.name }}" type="checkbox" value="{{ accesory.keyString }}" id="{{accesory.keyString}}" {% for selected_accesory in selected_accesories %}{% if accesory.keyString in selected_accesory.keystring %} checked {% endif %}{% endfor %}>                                                  
                                        <label class="form-check-label" for="defaultCheck1">
                                          {{ accesory.name }}
                                        </label>                                
                                    </div>
                                    {% endfor %} 
                                </div>
                                <div class="form-row d-flex justify-content-end">
                                    <div class="col-md-2 ">
                                        <div class="form-group">
                                            <a href="/intranet/" class="btn btn-primary">Añadir</a>  
                                        </div>
                                    </div>
                                </div>   
                            </div>
                            <div class="tab-pane fade" id="tecnicos" role="tabpanel" aria-labelledby="technics-tab">
                                <div class="form-row mt-3">
                                    <div class="form-group col-md-4">
                                        <label for="dataType">Tipo</label>
                                        <input type="text" name="dataType" class="form-control" id="dataType" placeholder="" value="{{ vehicle.dataType }}">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="variant">Variante</label>
                                        <input type="text" name="variant" class="form-control" id="variant" placeholder="" value="{{ vehicle.variant }}">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="version">Versión</label>
                                        <input type="text" name="version" class="form-control" id="version" placeholder="" value="{{ vehicle.version }}">
                                    </div>
                                </div>
                                <div class="form-row mt-3">
                                    <div class="form-group col">
                                        <label for="comercialName">Denominación Comercial</label>
                                        <input type="text" name="version" class="form-control" id="version" placeholder="" value="{{ vehicle.version }}">
                                    </div>
                                </div>
                                <div class="form-row mt-3">
                                    <div class="form-group col-md-2">
                                        <label for="mma">M.M.A.</label>
                                        <input type="text" name="mma" class="form-control" id="mma" placeholder="" value="{{ vehicle.mma }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="mmaAxe1">M.M.A. Eje1</label>
                                        <input type="text" name="mmaAxe1" class="form-control" id="mmaAxe1" placeholder="" value="{{ vehicle.mmaAxe1 }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="mmaAxe2">M.M.A. Eje2</label>
                                        <input type="text" name="mmaAxe2" class="form-control" id="mmaAxe2" placeholder="" value="{{ vehicle.mmaAxe2 }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="mmac">M.M.A.C.</label>
                                        <input type="text" name="mmac" class="form-control" id="mmac" placeholder="" value="{{ vehicle.mmac }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="mmr">M.M.R.(Sin Freno)</label>
                                        <input type="text" name="mmr" class="form-control" id="mmr" placeholder="" value="{{ vehicle.mmr }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="mmrf">M.M.R.(Con Freno)</label>
                                        <input type="text" name="mmrf" class="form-control" id="mmrf" placeholder="" value="{{ vehicle.mmrf }}">
                                    </div>
                                </div>
                                <div class="form-row mt-3">
                                    <div class="form-group col-md-2">
                                        <label for="mom">M.O.M.</label>
                                        <input type="text" name="mom" class="form-control" id="mom" placeholder="" value="{{ vehicle.mom }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="momAxe1">M.O.M. Eje1</label>
                                        <input type="text" name="momAxe1" class="form-control" id="momAxe1" placeholder="" value="{{ vehicle.momAxe1 }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="momAxe2">M.O.M. Eje2</label>
                                        <input type="text" name="momAxe2" class="form-control" id="momAxe2" placeholder="" value="{{ vehicle.momAxe2 }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="large">Largo</label>
                                        <input type="text" name="large" class="form-control" id="large" placeholder="" value="{{ vehicle.large }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="width">Anchura</label>
                                        <input type="text" name="width" class="form-control" id="width" placeholder="" value="{{ vehicle.width }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="height">Altura</label>
                                        <input type="text" name="height" class="form-control" id="height" placeholder="" value="{{ vehicle.height }}">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-2">
                                        <label for="volFront">Voladizo Delantero</label>
                                        <input type="text" name="volFront" class="form-control" id="volFront" placeholder="" value="{{ vehicle.volFront }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="volRear">Voladizo Trasero</label>
                                        <input type="text" name="volRear" class="form-control" id="volRear" placeholder="" value="{{ vehicle.volRear }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="volFront">Distancia Ejes</label>
                                        <input type="text" name="volFront" class="form-control" id="volFront" placeholder="" value="{{ vehicle.volFront }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="chargeLength">Logitud Carga</label>
                                        <input type="text" name="chargeLength" class="form-control" id="chargeLength" placeholder="" value="{{ vehicle.chargeLength }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="deposit">Deposito</label>
                                        <input type="text" name="deposit" class="form-control" id="deposit" placeholder="" value="{{ vehicle.deposit }}">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="deposit">Deposito</label>
                                        <input type="text" name="deposit" class="form-control" id="deposit" placeholder="" value="{{ vehicle.deposit }}">
                                    </div>
                                </div>
                                        
                            </div>
                        </div>
                    </div>  
                </div>
                <div class="form-row mt-2 mb-4">
                    <div class="col text-right">
                        <button type="submit" class="btn btn-primary">Guardar</button>
                        <a href="/admin" class="btn btn-primary">Cancelar</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>    
{% endblock %}

{% extends "layout.html.twig" %}
{% block content %}
    
<div class="content-wrapper pb-5" style="min-height: 960px">
    <section class="content-header"><h2>{{ titleForm }}</h2></section>
    <section class="content ">
        <div class="volver-link">
            <span class="alert float-left">{{ responseMessage }}</span>
            <a class="btn btn-outline-primary float-right" href="Intranet/{{ route }}/list?menu={{ menuState }}&item={{ menuItem }}">Lista</a>            
        </div>
        <div class="container-fluid">
            <form class="form-horizontal " id="form{{ titleForm|replace({" ":"", "á":"a","à":"a","é":"e","è":"e","í":"i","ì":"i","ó":"o","ò":"o","ú":"u","ù":"u"}) }}" action="Intranet/{{ route }}/save" method="post">
                <div class="form-group col">
                    <input type="hidden" style="display:none;" id="menu" name="menu" value="{{ menuState }}">
                    <input type="hidden" style="display:none;" id="menuItem" name="menuItem" value="{{ menuItem }}">   
                    <input type="hidden" style="display:none;" id="vehicle_accesories" value="{{ optionsArray['vehicle_accesories']|json_encode() }}">
                    {% set selects = {'bank_id':'bank_id','bank':'bank',
                        'account_id':'account_id','store_id':'store_id',
                        'access':'access','brand_id':'brand_id','type_id':'type_id',
                        'customer_id':'customer_id', 'seller_id':'seller_id',
                        'model_id':'model_id','providor_id':'providor_id',
                        'mader_id':'mader_id', 'taxes_id':'taxes_id', 
                        'paymentWay_id':'paymentWay_id', 'customerType':'customerType'} %}
                    {% set textareas = {'observations':'observations','vehicleComments':'vehicleComments','texts':'texts'} %}
                    {% set dates = {'birthDate':'birthDate','registryDate':'registryDate','sellDate':'sellDate','buyDate':'buyDate', 'arrival':'arrival','appointDate':'appointDate','offerDate':'offerDate'} %}
                    {% set currencies = {'pvd':'pvd','pvp':'pvp','cost':'cost','pvc':'pvc','vehiclePvp':'vehiclePvp', 'discount':'discount', 'vehicleDiscount':'vehicleDiscount','tva':'tva','total':'total','costTva':'costTva','costTotal':'costTotal','vehicleTva':'vehicleTva','vehicleTotal':'vehicleTotal'} %}
                    {% set checks = {'rebu':'rebu','secondKey':'secondKey'} %}
                    {% set hidden = {'vehicle_id':'vehicle_id'} %}
                    {% set sellOffers = {'plate':'plate','brand':'brand', 'model':'model'} %}
                    {% set assets = {'accesories':'accesories'} %}
                    <div class="input-group">
                        <input type="text" style="display:none;" id="id" name="id" value="{{ value.id }}">  
                    </div>                    
                    {% if 'data' in properties|keys %}
                        {% set tabs = properties|keys %}                        
                        <ul id="myTab" class="nav nav-tabs"> 
                            {% for tab in tabs %}
                                <li class="nav-item" role="presentation">                                        
                                    <button class="nav-link {% if (tab == selected_tab) %}{{ 'active' }}{% endif %}" id="{{ tab }}-tab" data-toggle="tab" data-target="#{{ tab }}-pane" type="button" role="tab" aria-controls="{{ tab }}-pane" aria-selected="{% if (tab == selected_tab) %}{{ 'true' }}{% else %}{{ 'false' }}{% endif %}">{{ labels[tab] }}</button>
                                </li>
                            {% endfor %}
                        </ul>                        
                        <div class="tab-content pt-4" id="nav-tabContent">                        
                        {% for tab in tabs %}
                            <div class="tab-pane fade {% if (tab == selected_tab)%}{{ 'show active' }}{% endif %}" id="{{tab}}-pane" role="tabpanel" aria-labelledby="{{tab}}-tab">
                            {% if tab == 'accesories' %}
                                <div class="row">
                                    <div class="col">
                                    {% for accesories_item in optionsArray[tab] %} 
                                        <div class="input-group">
                                            <label class="control-label" for="{{ accesories_item.id }}">{{ accesories_item.name }}</label>
                                            <input type="checkbox" id="{{ accesories_item.id }}" name="{{ accesories_item.id }}" class="form-control icheck-primary accesory_check" value="{{ accesories_item.keyString }}">                                        
                                        </div>
                                    {% endfor %}
                                    </div> 
                                </div>
                            
                            {% endif %}
                            {% if tab == 'components' %} 
                                
                                {% if titleForm == 'Vehículo' %}
                                    {% set vehicle_components_labels = {'id':'id','mader':'mader','ref':'ref','name':'name','cantity':'cantity','pvp':'pvp','total':'total'} %}
                                    {% set component_functions = {'delete':'delVehicleComponent'} %}
                                {% else %}
                                    {% set vehicle_components_labels = {'selloffercomponent_id':'selloffercomponent_id','mader':'mader','ref':'ref','name':'name','cantity':'cantity','pvp':'pvp','total':'total'} %}
                                    {% set component_functions = {'delete':'delSellOfferComponent'} %}
                                {% endif %}
                                <div id="dataTableVehicleComponents_wrapper" class="dataTables_wrapper dt-bootstrap4">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <table id="dataTableVehicleComponents" class="table-light table-listados table-bordered table-striped dataTable dtr-inline">
                                                <thead>
                                                    <tr>
                                                        {% for item in vehicle_components_labels %}
                                                            <th>{{ labels[item] }}</th>
                                                        {% endfor %}
                                                        <th>Acciones</th>
                                                    </tr>
                                                </thead>
                                                <tbody>                                    
                                                {% for value in optionsArray['vehicle_components'] %}                                                    
                                                    <tr>
                                                        {% for item in vehicle_components_labels %}
                                                            {% if item == 'total' %}
                                                                {% set total = value.cantity * value.pvp %}
                                                                    <td item="{{ item }}" item_value="{{ attribute(value, item) }}">{{ total|format_currency('EUR', locale='es') }}</td> 
                                                            {% else %}
                                                                <td item="{{ item }}" item_value="{{ attribute(value, item) }}">{% if item in currencies %} {{ attribute(value, item)|format_currency('EUR', locale='es') }}{% else %}{{ attribute(value, item)|e }}{% endif %}</td> 
                                                            {% endif %}
                                                        {% endfor %}
                                                        <td>
                                                            <a id="addButton{{value.id}}" href="javascript:setVehicleComponent({{ value|json_encode() }});"><i class="fa fa-edit"></i></a>
                                                            <a id="delButton{{value.id}}" href="javascript:{{ component_functions['delete'] }}({{ value|json_encode() }});"><i class="fa fa-trash"></i></a>
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                                </tbody>
                                                <tfoot>
                                                    <tr>
                                                        {% for item in vehicle_components_labels %}
                                                            <th>{{ labels[item] }}</th>
                                                        {% endfor %}
                                                        <th>Acciones</th>                                        
                                                    </tr>
                                                </tfoot>                                
                                            </table>
                                        </div>
                                    </div>
                                    
                                </div> 
                                <div class="totals-wrapper offset-7 col mt-2 mb-2">
                                    <div class="row">
                                        <div class="input-group">                                          
                                            <label class="control-label" for="baseComponents">Base Imponible</label>                                            
                                            <input type="text" disabled="true" id="baseComponents" name="baseComponents" class="assets_prices text-center"  value="">
                                        </div>
                                        <div class="input-group">  
                                            <label class="control-label" for="tvaComponents">Iva</label>                                            
                                            <input type="text" disabled="true" id="tvaComponents" name="tvaComponents" class="assets_prices text-center" value="">
                                        </div>
                                        <div class="input-group">  
                                            <label class="control-label" for="totalComponents">Total Componentes</label>                                            
                                            <input type="text" disabled="true" id="totalComponents" name="totalComponents" class="assets_prices text-center" value="">
                                        </div>
                                    </div>
                                </div>
                                <div class="button-wrapper float-left">
                                    <button type="button" data-toggle="modal" data-target="#components_modal" class="btn btn-primary" id="addComponent">Añadir</button>                                   
                                </div>
                                
                            {% endif %}
                            {% if tab == 'supplies' %} 
                                {% if titleForm == 'Vehículo' %}
                                    {% set vehicle_supplies_labels = {'id':'id','mader':'mader','ref':'ref','name':'name','cantity':'cantity','pvp':'pvp','total':'total'} %}
                                    {% set supply_functions = {'delete':'delVehicleSupply'} %}
                                {% else %}
                                    {% set vehicle_supplies_labels = {'selloffersupply_id':'selloffersupply_id','mader':'mader','ref':'ref','name':'name','cantity':'cantity','pvp':'pvp','total':'total'} %}
                                    {% set supply_functions = {'delete':'delSellOfferSupply'} %}
                                {% endif %}
                                    <div id="dataTableVehicleSupplies_wrapper" class="dataTables_wrapper dt-bootstrap4">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <table id="dataTableVehicleSupplies" class="table-light table-listados table-bordered table-striped dataTable dtr-inline">
                                                <thead>
                                                    <tr>
                                                        {% for item in vehicle_supplies_labels %}
                                                            <th>{{ labels[item] }}</th>
                                                        {% endfor %}
                                                        <th>Acciones</th>
                                                    </tr>
                                                </thead>
                                                <tbody>                                    
                                                {% for value in optionsArray['vehicle_supplies'] %}
                                                    <tr>
                                                        {% for item in vehicle_supplies_labels %}
                                                            {% if item == 'total' %}
                                                                {% set total = value.cantity * value.pvp %}
                                                                <td item="{{ item }}" item_value="{{ attribute(value, item) }}">{{ total|format_currency('EUR', locale='es') }}</td> 
                                                            {% else %}
                                                                <td item="{{ item }}" item_value="{{ attribute(value, item) }}">{% if item in currencies %} {{ attribute(value, item)|format_currency('EUR', locale='es') }}{% else %}{{ attribute(value, item)|e }}{% endif %}</td> 
                                                            {% endif %}
                                                        {% endfor %}
                                                        <td>
                                                            
                                                            <a id="addButton{{value.id}}" href="javascript:setVehicleSupply({{ value|json_encode() }});"><i class="fa fa-edit"></i></a>
                                                            <a id="delButton{{value.id}}" href="javascript:{{ supply_functions['delete'] }}({{ value|json_encode() }});"><i class="fa fa-trash"></i></a>
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                                </tbody>
                                                <tfoot>
                                                    <tr>
                                                        {% for item in vehicle_supplies_labels %}
                                                            <th>{{ labels[item] }}</th>
                                                        {% endfor %}
                                                        <th>Acciones</th>                                        
                                                    </tr>
                                                </tfoot>                                
                                            </table>
                                        </div>
                                    </div>
                                    <div class="totals-wrapper offset-7 col mt-2 mb-2">
                                    <div class="row">
                                        <div class="input-group">                                          
                                            <label class="control-label" for="baseSupplies">Base Imponible</label>                                            
                                            <input type="text" disabled="true" id="baseSupplies" name="baseSupplies" class="assets_prices text-center"  value="">
                                        </div>
                                        <div class="input-group">  
                                            <label class="control-label" for="tvaSupplies">Iva</label>                                            
                                            <input type="text" disabled="true" id="tvaSupplies" name="tvaSupplies" class="assets_prices text-center" value="">
                                        </div>
                                        <div class="input-group">  
                                            <label class="control-label" for="totalSupplies">Total Recambios</label>                                            
                                            <input type="text" disabled="true" id="totalSupplies" name="totalSupplies" class="assets_prices text-center" value="">
                                        </div>
                                    </div>
                                </div>
                                </div>                                
                                <div class="button-wrapper float-left">
                                    <button type="button" data-toggle="modal" data-target="#supplies_modal" class="btn btn-primary" id="addSupply">Añadir</button>                                   
                                </div>
                            {% endif %}
                            {% if tab == 'works' %} 
                                {% if titleForm == 'Vehículo' %}
                                    {% set vehicle_works_labels = {'id':'id','reference':'reference','description':'description','cantity':'cantity','pvp':'pvp','total':'total'} %}
                                    {% set work_functions = {'delete':'delVehicleWork'} %}
                                {% else %}
                                    {% set vehicle_works_labels = {'sellofferwork_id':'sellofferwork_id','reference':'reference','description':'description','cantity':'cantity','pvp':'pvp','total':'total'} %}
                                    {% set work_functions = {'delete':'delVehicleWork'} %}
                                {% endif %}
                                <div id="dataTableVehicleWorks_wrapper" class="dataTables_wrapper dt-bootstrap4">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <table id="dataTableVehicleWorks" class="table-light table-listados table-bordered table-striped dataTable dtr-inline">
                                                <thead>
                                                    <tr>
                                                        {% for item in vehicle_works_labels %}
                                                            <th>{{ labels[item] }}</th>
                                                        {% endfor %}
                                                        <th>Acciones</th>
                                                    </tr>
                                                </thead>
                                                <tbody>                                    
                                                {% for value in optionsArray['vehicle_works'] %}
                                                    <tr>
                                                        {% for item in vehicle_works_labels %}
                                                            {% if item == 'total' %}
                                                                {% set total = value.cantity * value.pvp %}
                                                                <td item="{{ item }}" item_value="{{ attribute(value, item) }}">{{ total|format_currency('EUR', locale='es') }}</td> 
                                                            {% else %}
                                                                <td item="{{ item }}" item_value="{{ attribute(value, item) }}">{% if item in currencies %} {{ attribute(value, item)|format_currency('EUR', locale='es') }}{% else %}{{ attribute(value, item)|e }}{% endif %}</td> 
                                                            {% endif %}
                                                        {% endfor %}
                                                        <td>
                                                            <a id="addButton{{value.id}}" href="javascript:setVehicleWorks({{ value|json_encode() }});"><i class="fa fa-edit"></i></a>
                                                            <a id="delButton{{value.id}}" href="javascript:delVehicleWork({{ value|json_encode() }});"><i class="fa fa-trash"></i></a>
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                                </tbody>
                                                <tfoot>
                                                    <tr>
                                                        {% for item in vehicle_works_labels %}
                                                            <th>{{ labels[item] }}</th>
                                                        {% endfor %}
                                                        <th>Acciones</th>                                        
                                                    </tr>
                                                </tfoot>                                
                                            </table>
                                        </div>
                                    </div>
                                    <div class="totals-wrapper offset-7 col mt-2 mb-2">
                                    <div class="row">
                                        <div class="input-group">                                          
                                            <label class="control-label" for="baseWorks">Base Imponible</label>                                            
                                            <input type="text" disabled="true" id="baseWorks" name="baseWorks" class="assets_prices text-center"  value="">
                                        </div>
                                        <div class="input-group">  
                                            <label class="control-label" for="tvaWorks">Iva</label>                                            
                                            <input type="text" disabled="true" id="tvaWorks" name="tvaWorks" class="assets_prices text-center" value="">
                                        </div>
                                        <div class="input-group">  
                                            <label class="control-label" for="totalWorks">Total Componentes</label>                                            
                                            <input type="text" disabled="true" id="totalWorks" name="totalWorks" class="assets_prices text-center" value="">
                                        </div>
                                    </div>
                                </div>
                                </div>                                
                                <div class="button-wrapper float-left">
                                    <button type="button" data-toggle="modal" data-target="#works_modal" class="btn btn-primary" id="addSupply">Añadir</button>                                   
                                </div>
                            {% endif %}                                
                                {% for item in properties[tab] %}                                                                        
                                {% if item in selects %}                                       
                                    <div class="row">                                        
                                        <div class="input-group col-10">
                                            <label class="control-label" for="{{ item }}">{{ labels[item] }}</label>
                                            <select id="{{ item }}" name="{{ item }}" class="form-control select2" value="{{ attribute(value, item) }}">                                                
                                                {% if optionsArray[item] is not empty %}                                                    
                                                    {% for option in optionsArray[item] %}
                                                        {% if item == 'account_id' %}
                                                            <option value="{{ option['id'] }}" {% if option['id'] == attribute(value, item) %}{{ 'selected="true"' }}{% endif %}>{{ option['accountNumber'] }}</option>
                                                        {% elseif item == 'vehicle_id' %}
                                                            <option value="{{ option['id'] }}" {% if option['id'] == attribute(value, item) %}{{ 'selected="true"' }}{% endif %}>{{ option['plate'] }}</option>                                                        
                                                        {% else %}
                                                            <option data-select2-id="{{ option['id'] }}" value="{{ option['id'] }}" {% if option['id'] == attribute(value, item) %}{{ 'selected="true"' }}{% endif %}>{{ option['name'] }}</option>
                                                        {% endif %}
                                                    {% endfor %}
                                                {% else %}                                                    
                                                    <option value="0">Sin datos</option>
                                                {% endif %}
                                            </select>        
                                        </div>                            
                                    </div>
                                {% elseif item in sellOffers %}                                    
                                    <div class="row">
                                        <div class="input-group col-10">
                                            <label class="control-label" for="{{ item }}">{{ labels[item] }}</label>
                                            <select id="{{ item }}" name="{{ item }}" class="form-control select2" value="">
                                                {% for option in optionsArray['vehicles'] %}
                                                    {% if item == 'plate' %}
                                                        <option km="{{ option['km'] }}" vin="{{ option['vin'] }}" price="{{ option['vehiclePvp'] }}" vehicle_brand="{{ option['brand_id'] }}" vehicle_model="{{ option['model_id'] }}" value="{{ option['id'] }}" >{{ option['plate'] }}</option>                                                        
                                                    {% elseif item == 'brand' %}
                                                        {% for brand_item in optionsArray['brands'] %}
                                                            <option value="{{ brand_item.id }}" {% if brand_item.id == option['brand_id'] %}{{ 'selected="true"' }}{%  endif %}>{{ brand_item.name }}</option>
                                                        {% endfor %}
                                                    {% elseif item == 'model' %}
                                                        <option value="{{ option['model_id'] }}" >{{ option['model'] }}</option>  
                                                    {% endif %}
                                                {% endfor %}

                                                <option value="0">Sin datos</option>
                                            </select>        
                                        </div>                            
                                    </div>                                                        
                                {% elseif item in hidden %}                                    
                                {% elseif item in textareas %}
                                    <div class="row">
                                        <div class="input-group col-10">
                                            <label class="control-label" for="{{ item }}">{{ labels[item] }}</label>
                                            <textarea type="text" id="{{ item }}" name="{{ item }}" class="form-control">{{ attribute(value, item) }}</textarea>
                                        </div>                            
                                    </div>
                                {% elseif item in dates %}                                    
                                    <div class="row">
                                        <div class="input-group col-10">                                            
                                            <label class="control-label" for="{{ item }}">{{ labels[item] }}</label>
                                            <input type="date" id="{{ item }}" name="{{ item }}" class="form-control" value="{{ attribute(value, item) }}">
                                        </div>                            
                                    </div>
                                {% elseif item in checks %}                                    
                                    <div class="row">
                                        <div class="input-group col-10">                                            
                                            <label class="control-label" for="{{ item }}">{{ labels[item] }}</label>
                                            <input type="checkbox" id="{{ item }}" name="{{ item }}" class=" form-control icheck-primary" {% if attribute(value,item) == 1 %} checked {% endif %} value="{{ attribute(value, item) }}">
                                        </div>                            
                                    </div>                                                              
                                {% else %}                                   
                                    <div class="row">
                                        <div class="input-group col-10">                                            
                                            <label class="control-label" for="{{ item }}">{{ labels[item] }}</label>                                            
                                            <input type="text" id="{{ item }}" name="{{ item }}" class="form-control" value="{% if item in currencies %} {{ attribute(value, item)|format_currency('EUR') }}{% else %}{{ attribute(value, item)}}{% endif %}">
                                        </div>                            
                                    </div>
                                {% endif %}
                            {% endfor %} 
                            
                            </div>
                        {% endfor %} 
                        </div>
                    {% else %}
                        {% for property in properties %}
                            {% if property in selects %}                                
                                <div class="row">
                                    <div class="input-group col-10">
                                        <label class="control-label" for="{{ property }}">{{ labels[property] }}</label>
                                        <select id="{{ property }}" name="{{ property }}" class="form-control select2" value="{{ attribute(value, property) }}">                                        
                                        {% if optionsArray[property] %} 
                                            
                                            {% for option in optionsArray[property] %}
                                                
                                                {% if property == 'account_id' %}
                                                    <option value="{{ option['id'] }}" {% if option['id'] == attribute(value, property) %}{{ 'selected="true"' }}{% endif %}>{{ option['accountNumber'] }}</option>
                                                {% else %}
                                                    <option value="{{ option['id'] }}" {% if option['id'] == attribute(value, property) %}{{ 'selected="true"' }}{% endif %}>{{ option['name'] }}</option>
                                                {% endif %}
                                            {% endfor %}
                                        {% else %}                                            
                                            <option value="1">Sin datos</option>
                                        {% endif %}                                        
                                        </select>        
                                    </div>                            
                                </div>
                            {% elseif property in textareas %}
                                <div class="row">
                                    <div class="input-group col-10">
                                        <label class="control-label" for="{{ property }}">{{ labels[property] }}</label>
                                        <textarea type="text" id="{{ property }}" name="{{ property }}" class="form-control">{{ attribute(value, property) }}</textarea>
                                    </div>                            
                                </div>
                            {% elseif property in dates %}
                                <div class="row">
                                    <div class="input-group col-10">                                            
                                        <label class="control-label" for="{{ property }}">{{ labels[property] }}</label>
                                        <input type="date" id="{{ property }}" name="{{ property }}" class="form-control" value="{{ attribute(value, property) }}">
                                    </div>                            
                                </div>
                            {% else %}
                                <div class="row">
                                    <div class="input-group col-10">
                                        <label class="control-label" for="{{ property }}">{{ labels[property] }}</label>
                                        <input type="text" id="{{ property }}" name="{{ property }}" class="form-control" value="{% if property in currencies %} {{ attribute(value, property)|format_currency('EUR') }}{% else %}{{ attribute(value, property)|e }}{% endif %}">
                                    </div>                            
                                </div>
                            {% endif %}                                                    
                        {% endfor %}                    
                    {% endif %}                     
                    {% if value.id != null %}
                        <div class="button-wrapper float-left">
                            <a class="btn btn-primary" id="delete_button" href="Intranet/{{ route }}/delete?id={{ value.id }}&menu={{ menuState }}&item={{ menuItem }}">Eliminar</a>                            
                        </div> 
                    {% endif %}
                    <div class="button-wrapper float-right">
                        <button type="submit" form="form{{ titleForm|replace({" ":"", "á":"a","à":"a","é":"e","è":"e","í":"i","ì":"i","ó":"o","ò":"o","ú":"u","ù":"u"}) }}" class="btn btn-primary" id="submit">Guardar</button>
                        <button type="button" form="form{{ titleForm|replace({" ":"", "á":"a","à":"a","é":"e","è":"e","í":"i","ì":"i","ó":"o","ò":"o","ú":"u","ù":"u"}) }}" class="btn btn-primary" id="reset">Restablecer</button>
                    </div>
                </div>                
            </form>
        </div>
    </section>
</div>
{% import 'macros.html.twig' as macros %}
{% if titleForm == 'Vehículo' %} 
    {% set components_labels = {'id':'id','ref':'ref','name':'name','pvp':'pvp'} %} 
    {% set supplies_labels = {'id':'id','ref':'ref','name':'name','pvp':'pvp'} %} 
    {% set works_labels = {'id':'id','reference':'reference','description':'description','pvp':'pvp'} %}
    {% set parent_id = 'vehicle_id' %}
    {% set object_id = {'1':'component_id', '2':'supply_id', '3':'work_id'} %}
    {% set functions = {'1':'setVehicleComponent','2':'saveVehicleComponent()','3':'setVehicleSupply','4':'saveVehicleSupply()', '5':'setVehicleWork','6':'saveVehicleWork()'} %}
    {% set titles = {'1':'vehicle_component_form','2':'vehicle_supply_form','3':'vehicle_works_form'} %}
{% else %}
    {% set components_labels = {'id':'id', 'ref':'ref','name':'name','pvp':'pvp'} %}
    {% set supplies_labels = {'id':'id','ref':'ref','name':'name','pvp':'pvp'} %} 
    {% set works_labels = {'id':'id','reference':'reference','description':'description','pvp':'pvp'} %}
    {% set parent_id = 'selloffer_id' %}
    {% set object_id = {'1':'component_id','2':'supply_id','3':'work_id'} %}
    {% set functions = {'1':'setVehicleComponent','2':'saveSellOfferComponent()', '3':'setVehicleSupply', '4':'saveSellOfferSupply()','5':'setVehicleWork','6':'saveSellOfferWork()'} %}
    {% set titles = {'1':'selloffer_component_form','2':'selloffer_supply_form','3':'selloffer_work_form'} %}
{% endif %}

{{ macros.items_list_modal('components_modal', components_labels, labels, currencies, 'Componentes', 'dataTableComponents',functions['1'], optionsArray['components']) }}
{{ macros.input_form_modal(parent_id, object_id['1'], 'component_form_modal', 'Componente', components_labels, labels, currencies, titles['1'], functions['2']) }}
{{ macros.items_list_modal('supplies_modal', supplies_labels, labels, currencies, 'Recambios', 'dataTableSupplies',functions['3'], optionsArray['supplies']) }}
{{ macros.input_form_modal(parent_id, object_id['2'], 'supply_form_modal', 'Recambio', supplies_labels, labels, currencies, titles['2'], functions['4']) }}    
{{ macros.items_list_modal('works_modal', works_labels, labels, currencies, 'Trabajos', 'dataTableWorks',functions['5'], optionsArray['works']) }}
{{ macros.input_form_modal(parent_id, object_id['3'], 'work_form_modal', 'Work', works_labels, labels, currencies, titles['3'], functions['6']) }}

{% endblock %}

